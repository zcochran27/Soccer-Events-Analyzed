<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>XGBoost Prediction</title>
</head>

<body>
    <h1>XGBoost Prediction</h1>
    <h2>Must start the api server first run the segment listed at the bottom of the app.py file</h2>
    
    <div>
        <h3>Pass 1</h3>
        <label for="startX1">X coordinate:</label>
        <input type="number" id="startX1" value="40">
        <label for="startY1">Y coordinate:</label>
        <input type="number" id="startY1" value="20">
        <label for="endX1">End X:</label>
        <input type="number" id="endX1" value="30">
        <label for="endY1">End Y:</label>
        <input type="number" id="endY1" value="60">
        <label for="outcome1">Outcome:</label>
        <input type="number" id="outcome1" value="1" min="0" max="1" step="1">
    </div>

    <div>
        <h3>Pass 2</h3>
        <label for="startX2">X coordinate:</label>
        <input type="number" id="startX2" value="40">
        <label for="startY2">Y coordinate:</label>
        <input type="number" id="startY2" value="20">
        <label for="endX2">End X:</label>
        <input type="number" id="endX2" value="30">
        <label for="endY2">End Y:</label>
        <input type="number" id="endY2" value="60">
        <label for="outcome2">Outcome:</label>
        <input type="number" id="outcome2" value="1" min="0" max="1" step="1">
    </div>

    <div>
        <h3>Pass 3</h3>
        <label for="startX3">X coordinate:</label>
        <input type="number" id="startX3" value="40">
        <label for="startY3">Y coordinate:</label>
        <input type="number" id="startY3" value="20">
        <label for="endX3">End X:</label>
        <input type="number" id="endX3" value="30">
        <label for="endY3">End Y:</label>
        <input type="number" id="endY3" value="60">
        <label for="outcome3">Outcome:</label>
        <input type="number" id="outcome3" value="1" min="0" max="1" step="1">
    </div>

    <div>
        <h3>Pass 4</h3>
        <label for="startX4">X coordinate:</label>
        <input type="number" id="startX4" value="40">
        <label for="startY4">Y coordinate:</label>
        <input type="number" id="startY4" value="20">
        <label for="endX4">End X:</label>
        <input type="number" id="endX4" value="30">
        <label for="endY4">End Y:</label>
        <input type="number" id="endY4" value="60">
        <label for="outcome4">Outcome:</label>
        <input type="number" id="outcome4" value="1" min="0" max="1" step="1">
    </div>

    <div>
        <h3>Pass 5</h3>
        <label for="startX5">X coordinate:</label>
        <input type="number" id="startX5" value="40">
        <label for="startY5">Y coordinate:</label>
        <input type="number" id="startY5" value="20">
        <label for="endX5">End X:</label>
        <input type="number" id="endX5" value="30">
        <label for="endY5">End Y:</label>
        <input type="number" id="endY5" value="60">
        <label for="outcome5">Outcome:</label>
        <input type="number" id="outcome5" value="1" min="0" max="1" step="1">
    </div>

    <div>
        <h3>Pass 6</h3>
        <label for="startX6">X coordinate:</label>
        <input type="number" id="startX6" value="40">
        <label for="startY6">Y coordinate:</label>
        <input type="number" id="startY6" value="20">
        <label for="endX6">End X:</label>
        <input type="number" id="endX6" value="30">
        <label for="endY6">End Y:</label>
        <input type="number" id="endY6" value="60">
        <label for="outcome6">Outcome:</label>
        <input type="number" id="outcome6" value="1" min="0" max="1" step="1">
    </div>

    <button onclick="makePrediction()">Predict</button>
    <p id="result"></p>

    <script>
        async function makePrediction() {
            let features = [];
            
            // Collect values from all 6 passes
            for(let i = 1; i <= 6; i++) {
                const startX = parseFloat(document.getElementById(`startX${i}`).value);
                const startY = parseFloat(document.getElementById(`startY${i}`).value);
                const endX = parseFloat(document.getElementById(`endX${i}`).value);
                const endY = parseFloat(document.getElementById(`endY${i}`).value);
                const outcome = parseFloat(document.getElementById(`outcome${i}`).value);
                
                features = features.concat([[startX, startY], [endX, endY], outcome]);
            }
            console.log(features);
            const payload = {
                features: features
            };
            
            const response = await fetch("http://127.0.0.1:8000/predict", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(payload)
            });

            if (response.ok) {
                const data = await response.json();
                document.getElementById("result").textContent = "Prediction: " + data.prediction.toFixed(4);
            } else {
                document.getElementById("result").textContent = "Error: " + response.status;
            }
        }
    </script>
</body>

</html>